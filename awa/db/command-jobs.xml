<query-mapping package='AWA.Commands.Models'>
    <description>
        List of jobs
    </description>

    <query name='command-job-list'>
        <comment>Get the list of jobs</comment>
        <sql>
            SELECT
            job.id AS id,
            job.name AS name,
            job.status AS status,
            job.create_date AS create_date,
            job.start_date AS start_date,
            TIMEDIFF(job.finish_date, job.start_date) AS finish_date,
            job.user_id AS user_id,
            user.name AS uname,
            session.start_date,
            session.end_date
            FROM awa_job AS job
            LEFT JOIN awa_user AS user ON job.user_id = user.id
            LEFT JOIN awa_session AS session ON job.session_id = session.id
        </sql>
        <sql-count>
            SELECT
            count(job.id)
            FROM awa_job AS job
        </sql-count>
    </query>

</query-mapping>
